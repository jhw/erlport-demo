[
  {kernel, [
    {logger_level, debug},  % Set to debug for detailed ErlCracker logging during development
    {logger, [
      %% File handler - logs to file for debugging
      {handler, file, logger_std_h, #{
        level => debug,
        config => #{
          file => "log/erlport_demo.log",
          max_no_bytes => 10485760,  % 10MB
          max_no_files => 5,           % Keep 5 rotated files
          compress_on_rotate => true
        },
        filters => [{progress_report, {fun logger_filters:progress/2, stop}}],
        formatter => {logger_formatter, #{
          single_line => false,
          template => [time, " [", level, "] ", msg, "\n"]
        }}
      }},

      %% Console handler - disabled by default, enable for interactive debugging
      %% Uncomment to see logs in console:
      %% {handler, console, logger_std_h, #{
      %%   level => debug,
      %%   formatter => {logger_formatter, #{
      %%     single_line => false,
      %%     template => [time, " [", level, "] ", msg, "\n"]
      %%   }}
      %% }}

      %% Remove default console handler
      {handler, default, undefined}
    ]}
  ]},

  %% SASL - System Application Support Libraries
  %% Captures supervisor reports, crash reports
  {sasl, [
    {sasl_error_logger, tty},  % Show critical errors on console
    {errlog_type, error},
    {sasl_progress_reports, false}  % Disable verbose supervisor start reports
  ]},

  {erlport_demo, [
    %% ErlCracker pool configuration - worker counts and timeouts per pool
    {erlcracker_pools, [
      {bbc_pool, #{
        pool_size => 2,
        worker_timeout_ms => 45000  % 45s - longer than caller's 30s timeout
      }},
      {fishy_pool, #{
        pool_size => 2,
        worker_timeout_ms => 45000
      }},
      {matcher_pool, #{
        pool_size => 2,
        worker_timeout_ms => 45000
      }}
    ]},

    %% Scraper timing configuration - per scraper type
    {scrapers, [
      {bbc_scraper, #{
        initial_delay_ms => 3000,      % 3 seconds before first league scrape
        interval_ms => 60000,          % 60 seconds between scrape cycles
        league_stagger_ms => 10000     % 10 seconds between each league within a cycle
      }},
      {fishy_scraper, #{
        initial_delay_ms => 3000,
        interval_ms => 60000,
        league_stagger_ms => 10000
      }}
    ]}
  ]}
].
